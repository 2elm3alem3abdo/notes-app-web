<!DOCTYPE html>
<html lang="en">
<head>
    <title>Add Your Notes</title>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div id="h1">Notes Web</div>
    <div id="main">
        <div id="ida">
            <input type="text" id="t" placeholder="Title">
            <input type="text" id="c" placeholder="Description">
        </div>
        <div id="a" style="color: white;">
            <button id="add">Add Note</button>
        </div>
        <div style="text-align: center; margin-top: 20px;">
            <button id="download">Download Notes</button>
        </div>     
    </div>
    <div id="container">
        <div id="nadd">
            <h1 style="color: black; text-align: center;">Notes Added:<br></h1>
        </div>
    </div>

    <script>
        const addbutton = document.getElementById("add");
        addbutton.addEventListener("click", NoteAddition);
        function NoteAddition(){
            const t = document.getElementById("t");
            const c = document.getElementById("c");
    
            const title = t.value;
            const content = c.value;

            if(title === "" || content ===""){
                alert("Empty fields found, both Title and Description are required.");
                return;
            }

            const notediv = document.createElement("div");
            notediv.classList.add("note");

            const bdiv = document.createElement("div");
            bdiv.id = "bn";

            const h1div = document.createElement("h1");
            h1div.textContent = title;
            h1div.id = "h1d";

            const h3div = document.createElement("h3");
            h3div.textContent = content;
            h3div.id = "h3d";
            
            const bnote = document.createElement("button");
            bnote.textContent = "Delete";
            bnote.id = "delete"
            bnote.addEventListener("click", function del(){
                notediv.classList.add("fade-out");
                setTimeout(() => {
                    notediv.remove();
                }, 200);
            })

            bdiv.appendChild(bnote);
            notediv.appendChild(h1div);
            notediv.appendChild(h3div);
            notediv.appendChild(bdiv);

            document.getElementById("container").appendChild(notediv);
            
            const container = document.getElementById("container");
            container.scrollTop = container.scrollHeight;
        }






        const downloadBtn = document.getElementById("download");
        downloadBtn.addEventListener("click", downloadNotes);

        function downloadNotes() {
            const notes = document.querySelectorAll(".note");
            if (notes.length === 0) {
                alert("No notes to download.");
                return;
            }

            let content = "";
            notes.forEach((note, index) => {
                const title = note.querySelector("#h1d")?.textContent || "";
                const description = note.querySelector("#h3d")?.textContent || "";
                content += `Note ${index + 1}:\nTitle: ${title}\nDescription: ${description}\n\n`;
            });

            const blob = new Blob([content], { type: "text/plain" });
            const url = URL.createObjectURL(blob);

            const link = document.createElement("a");
            link.href = url;
            link.download = "my_notes.txt";
            link.click();

            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>